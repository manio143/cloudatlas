version: '3'
services:
    i1:
        image:  cloudatlas
        networks:
            - cloud
        ports: ["8001:8000"]
        volumes:
            - ${PWD}/test_config/i1/server.ini:/cloudatlas/utility/server.ini
            - ${PWD}/test_config/i1/fetcher.ini:/cloudatlas/utility/fetcher.ini
            - ${PWD}/test_config/i1/server.log:/cloudatlas/server.log
            - ${PWD}/test_config/i1/fetcher.log:/cloudatlas/fetcher.log
    i2:
        image:  cloudatlas
        networks:
            - cloud
        ports: ["8002:8000"]
        volumes:
            - ${PWD}/test_config/i2/server.ini:/cloudatlas/utility/server.ini
            - ${PWD}/test_config/i2/fetcher.ini:/cloudatlas/utility/fetcher.ini
            - ${PWD}/test_config/i2/server.log:/cloudatlas/server.log
            - ${PWD}/test_config/i2/fetcher.log:/cloudatlas/fetcher.log
    i3:
        image:  cloudatlas
        networks:
            - cloud
        ports: ["8003:8000"]
        volumes:
            - ${PWD}/test_config/i3/server.ini:/cloudatlas/utility/server.ini
            - ${PWD}/test_config/i3/fetcher.ini:/cloudatlas/utility/fetcher.ini
            - ${PWD}/test_config/i3/server.log:/cloudatlas/server.log
            - ${PWD}/test_config/i3/fetcher.log:/cloudatlas/fetcher.log
networks:
    cloud:
